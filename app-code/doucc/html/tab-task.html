<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>Hello MUI</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">

		<link rel="stylesheet" href="../css/mui.min.css">
		<link rel="stylesheet" href="../css/main.css">
		<style>
			html,body {
				background-color: #efeff4;
			}
			
			
		</style>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav" style="padding-right: 15px;">
			<h1 class="mui-title">我的任务</h1>
		</header>
		<div class="mui-content">
			
			<ul id="task-list" class="mui-table-view">
			    <li class="mui-table-view-cell c-item">
					<div class="t-info">
						<span id="ddddd">任务标题1</span>
						<div id="demo1" class="mui-progressbar">
							<span></span>
						</div>
					</div>
					<div class="r-right">
						<span class="mui-badge mui-badge-primary">进行中</span>
					</div>
					
				</li>
			    <li class="mui-table-view-cell c-item">
			    	<div class="t-info">
			    		<span>任务标题2</span>
						<div id="demo2" class="mui-progressbar">
							<span></span>
						</div>
			    	</div>
			    	<div class="r-right">
			    		<span class="mui-badge mui-badge-success">已完成</span>
			    	</div>
			    	
			    </li>
			</ul>
			
			
		</div>
	</body>
	<script src="../js/mui.min.js"></script>
	<script src="../js/main.js"></script>
	<script>
		mui.init({
			swipeBack:true //启用右滑关闭功能
		});
		
		mui.plusReady(function() {
			mui.ajax(config.host + 'index.php?s=task/get_task', {
				data:{
					username:'username',
					password:'password'
				},
				dataType:'json',//服务器返回json格式数据
				type:'post',//HTTP请求类型
				timeout:10000,//超时时间设置为10秒；
				headers:{'Content-Type':'application/json'},
				success:function(data){
					console.log(data)
					alert(JSON.stringify(data));
					//服务器返回响应，根据响应结果，分析是否登录成功；
					if(data.code == 0){
						mui.alert(data.msg);
					}else{
						var html = "";
						for(var i in data.data){
							html += '<li class="mui-table-view-cell">';
						}
						var tlist = document.getElementById("task-list");
						tlist.innerHTML = html;
					}
					
				},
				error:function(xhr,type,errorThrown){
					//异常处理；
					mui.alert(999);
					document.getElementById("ddddd").innerHTML = "任务标题88";
					console.log(type);
				}
			});
		});
		
		mui("#demo1").progressbar({progress:20}).show();
		mui("#demo2").progressbar({progress:100}).show();
		
	</script>
</html>